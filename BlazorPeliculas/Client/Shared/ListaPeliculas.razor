<PageTitle>Lista Peliculas</PageTitle>

        @*<img src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif" />
        <text>Cargando...</text>*@

<div>
    <input type="checkbox" @bind="MostrarBotones" />
    <h2>Peliculas</h2>
    <ListadoGenerico Listado="Peliculas">
        <HayRegistros Context="peli">
            <PeliculaDetalle Pelicula="peli" MostrarBotones="MostrarBotones"
             EliminarPelicula="Eliminar"/>
        </HayRegistros>
    </ListadoGenerico>
</div>





@code {

    [Parameter] public List<Pelicula> Peliculas { get; set; }
    [Parameter] public RenderFragment Cargando { get; set; }
    [Parameter] public RenderFragment NoHayRegistros { get; set; }
    bool MostrarBotones = true;

    protected override void OnInitialized()
    {
        Console.WriteLine($"OnInitialized peliculas: {Peliculas.Count}");
    }
    protected override void OnParametersSet()
    {
        Console.WriteLine($"OnParametersSet peliculas: {Peliculas.Count}");
    }
    protected override void OnAfterRender(bool firstRender)
    {
        Console.WriteLine($"OnAfterRender primera vez {firstRender}");
    }
    protected override bool ShouldRender()
    {
        Console.WriteLine("ShouldRender");
        return true;
    }



    //protected override async Task OnInitializedAsync()
    //{
    //    //await Task.Delay(3000);
    //    //Peliculas = ObtenerPeliculas(); ;
    //}
    void Eliminar(Pelicula pelicula)
    {
        Peliculas.Remove(pelicula);
        Console.WriteLine($"Eliminar pelicula : {pelicula.Titulo}");
    }
}
